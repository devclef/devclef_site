{% extends "base.html" %}

{% block title %}{{ section.title }} — {{ config.title }}{% endblock title %}

{% block content %}
<article class="home">
  {{ section.content | safe }}
</article>

<section>
  <h2>Latest posts</h2>
  {% set posts = get_section(path="blog/_index.md") %}
  {% if posts.pages | length > 0 %}
  <ul>
    {% for page in posts.pages | slice(end=5) %}
      <li>
        <a href="{{ page.permalink }}">{{ page.title }}</a>
        {% if page.date %}<small> — {{ page.date | date(format="%Y-%m-%d") }}</small>{% endif %}
      </li>
    {% endfor %}
  </ul>
  {% else %}
  <p>No posts yet.</p>
  {% endif %}
</section>

<section>
  <h2>Sections</h2>
  {% set root = get_section(path="_index.md") %}
  {% if root.subsections | length > 0 %}
  <ul>
    {% for sub in root.subsections %}
      {% set s = get_section(path=sub) %}
      <li>
        <a href="{{ s.permalink }}">{{ s.title }}</a>
        <small>({{ s.pages | length }})</small>
      </li>
    {% endfor %}
  </ul>
  {% else %}
  <p>No sections yet.</p>
  {% endif %}
</section>
{% endblock content %}
